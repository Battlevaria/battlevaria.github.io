<!-- From https://thinkshout.com/blog/2014/12/creating-dynamic-menus-in-jekyll/ -->

{% assign url_parts = page.url | split: '/' %}
{% assign url_parts_size = url_parts | size %}
{% assign rm = url_parts | last | append '/' %}
{% assign base_url = page.url | replace: rm %}
{% assign other_base = url_parts | pop | join '/' %}

<b> {{url_parts_size}} pages in {{base_url}} after removing {{rm}} - other other base {{other_base}}: </b>
<ul>
{% for node in site.pages %}
  <li>(<a href='{{node.url}}'>{{node.url}}</a>)</li>
  {% if node.url contains base_url %}
    {% assign node_url_parts = node.url | split: '/' %}
    {% assign node_url_parts_size = node_url_parts | size %}
    {% assign filename = node_url_parts | last %}
    {% if url_parts_size == node_url_parts_size and filename != 'index.html' %}
      <li><a href='{{node.url}}'>{{node.title}}</a></li>
    {% endif %}
  {% endif %}
{% endfor %}
</ul>
