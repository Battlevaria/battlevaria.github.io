<!-- Based on a more advanced version: https://thinkshout.com/blog/2014/12/creating-dynamic-menus-in-jekyll/ -->

<ul class='menu'>
  <div class="flexfill"></div>
{% assign pages = (site.pages | sort:'order') %}
{% for node in pages %}
  {% if node.url == page.url %}
    {% assign selected = 'class="selected"' %}
  {% else %}
    {% assign selected = '' %}
  {% endif %}
  {% if node.lang == page.lang and node.title and node.url != '/404/' %}
      <li class='menuitem'><a {{selected}} href='{{node.url}}'>{{node.title}}</a></li>
      <div class="flexfill"></div>
  {% endif %}
{% endfor %}
</ul>

