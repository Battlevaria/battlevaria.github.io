<!-- Based on a more advanced version: https://thinkshout.com/blog/2014/12/creating-dynamic-menus-in-jekyll/ -->

<ul class='menu'>
{% for node in site.pages | where:"lang", page.lang %}
  {% if node.url == page.url %}
    {% assign selected = 'class="selected"' %}
  {% else %}
    {% assign selected = '' %}
  {% endif %}
  {% if node.title != '' and node.url != '404.md' %}
      <li class='menuitem'><a {{selected}} href='{{node.url}}'>{{node.title}}</a></li>
  {% endif %}
{% endfor %}
</ul>

